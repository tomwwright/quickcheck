import {
  attribute,
  autoGeneratedHashKey,
  table
} from "@aws/dynamodb-data-mapper-annotations";

import { Request } from "./Request";
import { Notification } from "./Notification";

@table("Results")
export class Result {
  @autoGeneratedHashKey()
  resultId: string;

  @attribute()
  checkId: string;

  @attribute()
  request: Request;

  @attribute()
  datetime: string;

  @attribute()
  elapsedMillis: number;

  @attribute()
  statusCode: number;

  @attribute()
  responseHeaders: { [key: string]: string };

  @attribute()
  body: string;

  @attribute()
  message: string;

  @attribute()
  sentNotifications: Notification[];
}

export type ResultType = {
  resultId: string;
  checkId: string;
  request: Request;
  datetime: string;
  elapsedMillis: number;
  statusCode: number;
  responseHeaders: { [key: string]: string };
  body: string;
  message: string;
  sentNotifications: Notification[];
};
